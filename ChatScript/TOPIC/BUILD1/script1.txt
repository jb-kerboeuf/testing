00004 Aug25'17-17:24:23 1 7.52
TOPIC: ~flight 0x2 1919694206 10 10 1373 flight.top
" all " 03~ t: 7RECAP ( $options ) ^keep ( ) \t From: $origin \t\t To: $destination \n \t Adults: $nb_adults \t\t Children: $nb_children \t\t Infants: $nb_infants \n \t Departure: $depart_date \t\t Return: $return_date \n \t Flexible: $is_flexible \n \t Options: $options \n ^gambit ( ~hello ) `00V t: ( !$destination ) ^keep ( ) Where are you going? `00F a: ( Madrid ) $destination = Madrid `00H t: ( !$origin ) ^keep ( ) From where? `00y a: ( Paris ) $origin = Paris `00! t: ( !$depart_date ) ^keep ( ) When would you like to go? `00C a: ( 4 ) $depart_date = ^"05/04" `00$ t: ( !$return_date ) ^keep ( ) And when are you coming back? `00D a: ( 11 ) $return_date = ^"05/11" `00& t: ( !$nb_adults ) ^keep ( ) How many adults? ( 12+ year-olds ) `00B a: ( _~number ) $nb_adults = _0 `00w a: ( wife ) $nb_adults = 2 `01i t: ( !$nb_infants ) ^keep ( ) Will you travel with an infant? ( less than 2 years old ) `00C a: ( _~number ) $nb_infants = _0 `00F a: ( [ ~no none ] ) $nb_infants = 0 `010 t: ( !$nb_children ) ^keep ( ) How many children under the age of 12? `00D a: ( _~number ) $nb_children = _0 `00D a: ( our child ) $nb_children = 1 `00@ t: ( !$is_flexible ) ^keep ( ) Do you have flexible dates? `00A a: ( ~yes ) $is_flexible = yes `00y a: ( ~no ) $is_flexible = no `00B t: ( ) ^keep ( ) Anything else? `00V a: ( _* ) Very well! \n $options = _0 ^gambit ( ~ ) `000 
TOPIC: ~hello 0x2 1170899255 10 2 786 hello.top
" all " 00D u: ( from Paris ) $origin = Paris `00I u: ( to Madrid ) $destination = Madrid `00E u: ( 4th ) $depart_date = ^"05/04" `00F u: ( 11th ) $return_date = ^"05/11" `00w u: ( wife ) $nb_adults = 2 `00z u: ( child ) $nb_children = 1 `00N u: ( no * [ baby infant ] ) $nb_infants = 0 `00N u: ( flight ) ^keep ( ) ^gambit ( ~flight ) `04n t: ( $options ) ^keep ( ) Your Concierge will get back to you within the next 4 hours with additional details regarding your booking. $origin = null $destination = null $depart_date = null $return_date = null $nb_adults = null $nb_children = null $nb_infants = null $flexible = null $options = null ^reset ( TOPIC * ) `01J t: ( ) ^keep ( ) Hello. What can I do for you today? \n ^btns ( reply Flights Trains Coaches "Transfers & Taxis" ) `000 
TOPIC: ~xpost_control 0x1b -2087476546 1 1 99 simplecontrol.top
" all " 01a t: ( ) ^keep ( ) ^preprint ( \[ ^'{ "nbEchanges": %input, "progress": 0 }' \] ) `000 
TOPIC: ~control 0x19 387037449 2 0 692 simplecontrol.top
" all " ( $_userdata $_dataraw ) 05P u: ( \[ _* ) ^if 00d( $data ) 00u{ ^fromoobtomain ( ) } 04# else ( 1 ) 04N { $_userdata = ^jsonparse ( safe _0 ) ^if 00T( ! $_userdata.givenName and ! $_userdata.surname ) 00u{ ^fromoobtomain ( ) } 02% else ( 1 ) 02P { $_dataraw = ^' { "firstName": "", "lastName": "" } ' $data = ^jsonparse ( permanent $_dataraw ) $data.firstName = $_userdata.givenName $data.lastName = $_userdata.surname ^fromoobtomain ( ) } 004 } 004 `032 u: 6MAIN ( ) ^if 00g( ! %topic ) 00I{ ^gambit ( ~hello ) ^end ( RULE ) } 004 ^nofail ( TOPIC ^rejoinder ( ) ) ^nofail ( TOPIC ^respond ( %topic ) ) ^if 00m( %response == 0 ) 00M{ ^nofail ( TOPIC ^gambit ( %topic ) ) } 004 `000 
